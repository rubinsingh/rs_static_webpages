<html>
<head>
<title>Geo-targeting example</title>
</head>
<body>
<script type="text/javascript">
	var options = {
		enableHighAccuracy: true,
		timeout: 5000,
		maximumAge: 0
	};

    function success(pos) {
    	var crd = pos.coords;
	console.log('Your current position is:');
	console.log(`Latitude : ${crd.latitude}`);
	console.log(`Longitude: ${crd.longitude}`);
	console.log(`More or less ${crd.accuracy} meters.`);
	var geocoder = new google.maps.Geocoder;
	var latlng = {lat: parseFloat(crd.latitude), lng: parseFloat(crd.longitude)};
	geocoder.geocode({'location': latlng}, function(results, status) {
		if (status === 'OK') {
			if (results[2]) {
				if(results[2].address_components) {
					console.log(results[2].address_components[2]);
				}
			} else {
				window.alert('No results found');
			}
		} else {
			window.alert('Geocoder failed due to: ' + status);
		}
  	});
    }
    function getCity() {
    
    }
    function error(err) {
        var message = err.code + " " + err.message;
    	alert(message);
    }
    function initMap() {
	    navigator.geolocation.getCurrentPosition(success, error, options);
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBxfb3xPzuPGxbec9c0haoYtg1CLV1KHVY&callback=initMap"
        async defer></script>
</body>
</html>
